<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aafat Gaming</title>
<!-- Google Fonts for a modern neon look -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" />

<!-- Font Awesome for social icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
  /* Reset */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Body with background and overlay */
body {
  font-family: 'Orbitron', sans-serif;
  height: 100vh;
  background-image: url('https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExb2lwaHNkaDk0dDZ5dzFsdnh1anM0cmo1NGpxc2x6ZWlxamNwMWFmbSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/6FmWneK9CsoumzFsqZ/giphy.gif'); /* Replace with your background link */
  background-size: cover;
  background-position: center;
  position: relative;
  color: #fff;
}

body::before {
  content: "";
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* Overlay for contrast */
  z-index: 0;
}

/* Container for content */
.container {
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Header styles */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  position: relative;
  z-index: 2;
  background: rgba(0, 0, 0, 0.2);
}

/* Logo in circle with glow */
.logo {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 70px;
  height: 70px;
  border-radius: 50%;
  overflow: hidden;
  box-shadow: 0 0 20px rgba(0,255,255,0.6); /* subtle glow */
  border: 3px solid #0ff;
  background-color: transparent;
  cursor: pointer;
}

.logo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Navigation buttons */
.nav-buttons {
  display: flex;
  gap: 15px;
}

.nav-buttons a {
  color: #0ff;
  text-decoration: none;
  font-weight: 500;
  padding: 8px 12px;
  border-radius: 5px;
  transition: all 0.2s;
}

.nav-buttons a:hover {
  background-color: rgba(0, 255, 255, 0.2);
}

/* Profile button and modal */
.profile-section {
  position: relative;
  margin-right: 20px;
}

.profile-btn {
  background: none;
  border: 2px solid #0ff;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  color: #0ff;
  font-weight: 500;
  transition: all 0.2s;
}

.profile-btn:hover {
  background-color: rgba(0, 255, 255, 0.2);
}

/* Profile modal */
#profileModal {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background-color: rgba(0,0,0,0.8);
  padding: 15px;
  border-radius: 8px;
  margin-top: 10px;
  width: 250px;
  z-index: 3;
  font-size: 14px;
}

#profileModal h3 {
  margin-bottom: 10px;
  color: #0ff;
}

#profileModal p {
  margin: 5px 0;
  word-wrap: break-word;
}

/* Main content area */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 20px;
  z-index: 1;
  position: relative;
  font-size: 2em
}

/* Announcement Section */
.announcement-section {
  width: 80%;
  max-width: 800px;
  margin: 20px auto;
  padding: 15px;
  background-color: rgba(0,0,0,0.4);
  border-radius: 10px;
  text-align: center;
  font-size: 1.2em;
  position: relative;
}

/* Announcement display text */
#announcementText {
  margin-bottom: 10px;
}

/* Set Announcement Button (logo button) */
.set-announcement-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: 2px solid #0ff;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.set-announcement-btn:hover {
  background-color: rgba(0, 255, 255, 0.2);
}

/* Input box for new announcement */
#announcementInput {
  width: 100%;
  padding: 8px;
  font-size: 1em;
  border-radius: 5px;
  border: none;
  margin-top: 10px;
  display: none; /* Hidden by default */
}

/* Buttons for save/cancel */
#announcementButtons {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  gap: 15px;
  display: none; /* Hidden by default */
}
#announcementButtons button {
  padding: 8px 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.2s;
}
#announcementButtons button:hover {
  opacity: 0.8;
}

#saveBtn {
  background-color: #0ff;
  color: #000;
}
#cancelBtn {
  background-color: #f00;
  color: #fff;
}

/* Social media buttons */
.social-buttons {
  margin-top: 30px;
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}

/* Specific colors for each social media icon */
.social-buttons a.youtube {
  color: red;
}
.social-buttons a.discord {
  color: #0d6efd; /* blue */
}
.social-buttons a.whatsapp {
  color: green;
}
.social-buttons a.instagram {
  color: #ff00e1;
}
.social-buttons a:hover {
  box-shadow: 0 0 10px currentColor;
  transform: scale(1.1);
}

@media(max-width: 600px) {
  .nav-buttons {
    flex-direction: column;
    align-items: flex-end;
  }
  .social-buttons {
    justify-content: center;
  }
}
</style>
</head>
<body>

<div class="container">
  <!-- Header with logo and navigation -->
  <div class="header">
    <!-- Logo in circle -->
    <div class="logo" title="Logo (Click for Announcement)">
      <img src="https://media.giphy.com/media/yiHVzPd8GkInOQGkEk/giphy.gif" alt="Aafat Gaming Logo" />
    </div>
    
    <!-- Navigation buttons -->
    <div class="nav-buttons">
      <a href="index.html">HOME</a>
      <a href="about.html">ABOUT US</a>
      <a href="media.html">MEDIA</a>
      <a href="rule.html">RULES</a>
      <a href="game.html">GAMES</a>
      <a href="server.html">SERVER</a>
      <a href="apply.html">APPLY</a>
    </div>

    <!-- Profile Button -->
    <div class="profile-section">
      <button class="profile-btn" id="discordLogin">Login with Discord</button>
      <div id="profileModal">
        <h3>Profile Details</h3>
        <p><strong>Name:</strong> <span id="name">-</span></p>
        <p><strong>User Mention:</strong> <span id="mention">-</span></p>
        <p><strong>User ID:</strong> <span id="userId">-</span></p>
        <p><strong>Phone Number:</strong> <span id="phone">-</span></p>
        <p><strong>Email ID:</strong> <span id="email">-</span></p>
      </div>
    </div>
  </div>

  <!-- Announcement Section -->
  <div class="announcement-section" id="announcementSection">
    <div id="announcementText">Welcome to Aafat Gaming! Stay tuned for updates.</div>
    <!-- Logo button to set/edit announcement -->
    <div class="set-announcement-btn" id="setAnnouncementBtn" title="Set Announcement">
      <i class="fas fa-pencil-alt"></i>
    </div>
    <!-- Input for new announcement, hidden initially -->
    <input type="text" id="announcementInput" placeholder="Enter new announcement..." />
    <!-- Save and Cancel buttons -->
    <div id="announcementButtons">
      <button id="saveBtn">Save</button>
      <button id="cancelBtn">Cancel</button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main">
    <h1>Welcome to Aafat Gaming</h1>
    <p><img src="https://cdn.discordapp.com/emojis/599508540083929098.gif?size=96&quality=lossless" alt="ðŸ”¥" width="40" height="40">Unleash your skills, dominate every battle, and rise beyond limits.<img src="https://cdn.discordapp.com/emojis/599508540083929098.gif?size=96&quality=lossless" alt="ðŸ”¥" width="40" height="40"></p>
    <p><img src="https://cdn.discordapp.com/emojis/1428414003343921333.gif?size=96&quality=lossless" alt="ðŸ”¥" width="40" height="40">Enter the arena where gamers become legends!<img src="https://cdn.discordapp.com/emojis/1428414003343921333.gif?size=96&quality=lossless" alt="ðŸ”¥" width="40" height="40"></p>
    <div class="social-buttons">
      <a class="youtube" href="https://youtube.com/@mafiaaafat?si=-6uo5L9ii27XErY8" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
      <a class="instagram" href="https://www.instagram.com/ig_aafatyt?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
      <a class="discord" href="https://discord.gg/MDEDDM92r5" target="_blank" title="Discord"><i class="fab fa-discord"></i></a>
      <a class="whatsapp" href="https://wa.me/" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    </div>
  </div>
</div>

<!-- Discord OAuth Script -->
<script>
  // Replace these with your Discord application's details
  const CLIENT_ID = '1434242083425878086'; // <-- Insert your Client ID here
  const REDIRECT_URI = 'https://aafatgaming.fun/'; // <-- Insert your redirect URI
  const SCOPE = 'identify email';

  // Webhook URL - replace with your actual webhook URL
  const WEBHOOK_URL = 'https://discord.com/api/webhooks/1436807166441947326/TDsteagPEvUWZ6doblqvalWHKmafWGrdMsguSz_XBITklWx6uy-p6WpjUO2HBcefkkSC';

  document.getElementById('discordLogin').addEventListener('click', () => {
    const oauthUrl = `https://discord.com/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=${encodeURIComponent(SCOPE)}`;
    window.location.href = oauthUrl;
  });

  // Function to send data to Discord webhook
  function sendToDiscordWebhook(userData) {
    const avatarUrl = userData.avatar 
      ? `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`
      : 'https://cdn.discordapp.com/embed/avatars/0.png'; // default avatar if none

    const embed = {
      title: "New User Profile",
      description: `User has logged in via Discord`,
      color: 0x00ffff,
      fields: [
        { name: "Name", value: userData.username + '#' + userData.discriminator, inline: true },
        { name: "User ID", value: userData.id, inline: true },
        { name: "Mention", value: `<@${userData.id}>`, inline: false },
        { name: "Email", value: userData.email || 'N/A', inline: false },
        { name: "Phone", value: 'N/A', inline: false }
      ],
      thumbnail: {
        url: avatarUrl
      }
    };

    fetch(WEBHOOK_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ embeds: [embed] }),
    });
  }

  // Parse URL fragment for access token
  function parseHashParams() {
    const hash = window.location.hash.substring(1);
    const params = {};
    hash.split('&').forEach((item) => {
      const [key, value] = item.split('=');
      params[key] = decodeURIComponent(value);
    });
    return params;
  }

  // Fetch profile after redirect
  window.onload = () => {
    const params = parseHashParams();
    if (params.access_token) {
      fetch('https://discord.com/api/users/@me', {
        headers: {
          Authorization: `Bearer ${params.access_token}`,
        },
      })
      .then(res => res.json())
      .then(data => {
        // Fill profile info
        document.getElementById('name').textContent = data.username + '#' + data.discriminator;
        document.getElementById('mention').textContent = `<@${data.id}>`;
        document.getElementById('userId').textContent = data.id;
        document.getElementById('phone').textContent = 'N/A'; // Discord API doesn't provide phone
        document.getElementById('email').textContent = data.email || 'N/A';

        // Send data to Discord webhook
        sendToDiscordWebhook(data);

        // Show profile modal
        document.getElementById('profileModal').style.display = 'block';

        // Remove token from URL
        window.history.replaceState({}, document.title, window.location.pathname);
      });
    }

    // Toggle profile modal on button click
    const profileBtn = document.getElementById('discordLogin');
    const modal = document.getElementById('profileModal');

    profileBtn.addEventListener('click', () => {
      if (modal.style.display === 'block') {
        modal.style.display = 'none';
      } else {
        modal.style.display = 'block';
      }
    });
  };
</script>

<!-- Script for Announcement Handling -->
<script>
  const correctPassword = 'admin123'; // Set your password here
  const announcementTextDiv = document.getElementById('announcementText');
  const announcementInput = document.getElementById('announcementInput');
  const setAnnBtn = document.getElementById('setAnnouncementBtn');
  const announcementButtons = document.getElementById('announcementButtons');
  const saveBtn = document.getElementById('saveBtn');
  const cancelBtn = document.getElementById('cancelBtn');

  // When clicking the logo button
  setAnnBtn.addEventListener('click', () => {
    const password = prompt('Enter password to set announcement:');
    if (password === correctPassword) {
      // Show input box with current announcement
      announcementInput.value = announcementTextDiv.innerText;
      announcementInput.style.display = 'block';
      announcementButtons.style.display = 'flex';
      // Hide the display text
      announcementTextDiv.style.display = 'none';
    } else {
      alert('Incorrect password!');
    }
  });

  // Save new announcement
  document.getElementById('saveBtn').addEventListener('click', () => {
    const newAnn = announcementInput.value.trim();
    if (newAnn !== '') {
      announcementTextDiv.innerText = newAnn;
    }
    // Hide input and buttons, show text
    announcementInput.style.display = 'none';
    announcementButtons.style.display = 'none';
    announcementTextDiv.style.display = 'block';
  });

  // Cancel editing
  document.getElementById('cancelBtn').addEventListener('click', () => {
    announcementInput.style.display = 'none';
    announcementButtons.style.display = 'none';
    announcementTextDiv.style.display = 'block';
  });
</script>

</body>
</html>
